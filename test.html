<!DOCTYPE html>
<html>
<head>
  <title>Google Login Test</title>
  <script src="https://accounts.google.com/gsi/client" async defer></script>
</head>
<body>

<h2>Google Login Test</h2>

<div id="g_id_onload"
     data-client_id="301560546435-rkif1c9uv1sgjqvu0tbd0p2pj716bj1q.apps.googleusercontent.com"
     data-callback="handleCredentialResponse">
</div>

<div class="g_id_signin" data-type="standard"></div>

<script>
  function handleCredentialResponse(response) {
    console.log("Encoded JWT ID token: " + response.credential);

    fetch("http://localhost:5000/api/auth/google", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        token: response.credential
      })
    })
    .then(res => res.json())
    .then(data => {
      console.log("Backend Response:", data);
      alert("Login Success!\nUser: " + data.user.email);
    })
    .catch(err => {
      console.error(err);
      alert("Login Failed");
    });
  }
</script>

</body>
</html>
